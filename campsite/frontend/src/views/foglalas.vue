<template>
  <div class="container mx-auto px-4 py-6 space-y-6">

    <!-- K√©pgal√©ria (teljes sz√©less√©g) -->
    <div class="relative rounded-xl overflow-hidden shadow-lg">
      <img :src="images[currentImage]" alt="Helysz√≠n k√©pe" class="w-full h-96 md:h-[500px] object-cover"/>
      
      <button @click="prevImage" 
              class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/70 rounded-full p-2 hover:bg-white transition text-2xl">
        ‚Äπ
      </button>
      <button @click="nextImage" 
              class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/70 rounded-full p-2 hover:bg-white transition text-2xl">
        ‚Ä∫
      </button>
    </div>

    <!-- Tartalom r√©sz (2 oszlopos layout) -->
    <div class="flex flex-col md:flex-row gap-6">
      <!-- Bal oldali r√©sz - Inform√°ci√≥k -->
      <div class="md:w-2/3 space-y-6">
        
        <!-- C√≠msor √©s √©rt√©kel√©s -->
        <div>
          <h1 class="text-3xl font-bold text-gray-800 mb-2">Balatoni T√≥parti Kemping</h1>
          <div class="flex items-center gap-4 text-sm text-gray-600">
            <div class="flex items-center gap-1">
              <span class="text-yellow-500">‚≠ê</span>
              <span class="font-semibold text-gray-800">4.8</span>
              <span class="text-gray-500">(124 √©rt√©kel√©s)</span>
            </div>
            <span class="text-gray-500">üìç 8600 Si√≥fok, Szabadstrand √∫t 1.</span>
          </div>
        </div>

        <!-- Feature / szolg√°ltat√°sok -->
        <div class="flex flex-wrap gap-3">
          <div v-for="feature in features" :key="feature.name" 
               class="flex items-center gap-2 bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-sm">
            <span>{{ feature.icon }}</span>
            <span class="font-medium text-gray-700">{{ feature.name }}</span>
          </div>
        </div>

        <!-- Szolg√°ltat√°sok felsorol√°s -->
        <div class="border-t border-gray-200 pt-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">Szolg√°ltat√°sok</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">WiFi</span>
              </div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">Strand</span>
              </div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">Zuhanyz√≥</span>
              </div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">Cs√≥nak k√∂lcs√∂nz√©s</span>
              </div>
            </div>
            <div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">Ingyenes parkol√≥</span>
              </div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">J√°tsz√≥t√©r</span>
              </div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">Mos√≥konyha</span>
              </div>
              <div class="flex items-start gap-2 mb-2">
                <span class="text-green-600">‚úì</span>
                <span class="text-gray-600">Ker√©kp√°r k√∂lcs√∂nz√©s</span>
              </div>
            </div>
          </div>
        </div>

        <!-- H√°zirend -->
        <div class="border-t border-gray-200 pt-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">H√°zirend</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-gray-700">‚è∞</span>
                <div>
                  <p class="font-medium text-gray-800">Bejelentkez√©s: 14:00-t√≥l</p>
                </div>
              </div>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-gray-700">üè†</span>
                <div>
                  <p class="font-medium text-gray-800">H√°zi√°llat enged√©lyezett (fel√°r ellen√©ben)</p>
                </div>
              </div>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-gray-700">üö≠</span>
                <div>
                  <p class="font-medium text-gray-800">√âjszakai csend: 22:00-06:00</p>
                </div>
              </div>
            </div>
            <div>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-gray-700">‚è∞</span>
                <div>
                  <p class="font-medium text-gray-800">Kijelentkez√©s: 10:00-ig</p>
                </div>
              </div>
              <div class="flex items-center gap-2 mb-3">
                <span class="text-gray-700">üö¨</span>
                <div>
                  <p class="font-medium text-gray-800">Doh√°nyz√°s csak kijel√∂lt helyen</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Helysz√≠n le√≠r√°sa -->
        <div class="border-t border-gray-200 pt-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">A sz√°ll√°sr√≥l</h2>
          <p class="text-gray-600 leading-relaxed mb-4">
            A Balatoni T√≥parti Kemping a Balaton partj√°n, Si√≥fok sz√≠v√©ben tal√°lhat√≥, k√∂zvetlen v√≠zparti hozz√°f√©r√©ssel. A kemping t√∂bb mint 50 √©ves m√∫ltra tekint vissza, √©s folyamatosan meg√∫jul a vend√©gek ig√©nyeinek megfelel≈ëen.
          </p>
          <p class="text-gray-600 leading-relaxed mb-4">
            A kemping ter√ºlet√©n megtal√°lhat√≥ minden, amire egy t√∂k√©letes nyaral√°shoz sz√ºks√©g√©t lehet: homokos strand, j√°tsz√≥t√©r, √©tterem, b√ºf√©, mosd√≥k zuhanyz√≥kkal, mos√≥konyha √©s WiFi lefedetts√©g.
          </p>
          <p class="text-gray-600 leading-relaxed">
            A k√∂rny√©ken sz√°mos l√°tnival√≥ √©s program v√°rja a vend√©geket: v√≠zi sportok, ker√©kp√°roz√°s, t√∫r√°z√°s, bork√≥stol√°s √©s kultur√°lis programok.
          </p>
        </div>

        <!-- Szolg√°ltat√°sok r√©szletesen -->
        <div class="border-t border-gray-200 pt-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">Szolg√°ltat√°sok</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">WiFi</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">Ingyenes parkol√≥</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">√âtterem</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">Strand</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">J√°tsz√≥t√©r</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">Mos√≥konyha</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">Zuhanyz√≥</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-green-600">‚úì</span>
              <span class="text-gray-600">Ker√©kp√°r k√∂lcs√∂nz√©s</span>
            </div>
            <div class="flex items-start gap-2">
              <span class="text-gray-400">‚úó</span>
              <span class="text-gray-400 line-through">√Åruh√°z</span>
            </div>
          </div>
        </div>

        <!-- Kemping t√©rk√©p -->
        <div class="border-t border-gray-200 pt-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">Kemping t√©rk√©p</h2>
          <div class="flex gap-3 mb-3 text-sm">
            <span class="flex items-center gap-1">
              <span class="w-3 h-3 rounded-full bg-green-500 inline-block"></span> 
              <span class="text-gray-600">Szabad</span>
            </span>
            <span class="flex items-center gap-1">
              <span class="w-3 h-3 rounded-full bg-red-500 inline-block"></span> 
              <span class="text-gray-600">Foglalt</span>
            </span>
            <span class="flex items-center gap-1">
              <span class="w-3 h-3 rounded-full bg-blue-500 inline-block"></span> 
              <span class="text-gray-600">Kiv√°lasztva</span>
            </span>
          </div>
          <div id="campingMap" class="w-full rounded-lg border border-gray-200" style="height: 400px; z-index: 0;"></div>
          <div v-if="selectedSpot" class="mt-3 p-4 bg-blue-50 rounded-lg border border-blue-200">
            <p class="font-semibold text-lg text-gray-800">{{ selectedSpot.name }}</p>
            <p class="text-sm text-gray-600 mt-1">{{ selectedSpot.type }} ¬∑ Max {{ selectedSpot.capacity }} f≈ë ¬∑ {{ selectedSpot.price }} Ft/√©j</p>
          </div>
        </div>

        <!-- Vend√©g kommentek -->
        <div class="border-t border-gray-200 pt-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-4">Vend√©g kommentek</h2>
          
          <!-- √ârt√©kel√©s √∂sszes√≠t≈ë -->
          <div class="flex items-center gap-2 mb-6">
            <span class="text-yellow-500 text-xl">‚≠ê</span>
            <span class="text-2xl font-bold text-gray-800">4.8</span>
            <span class="text-gray-500">¬∑ 124 √©rt√©kel√©s</span>
          </div>

          <div class="space-y-4">
            <div class="pb-4 border-b border-gray-200">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-semibold text-gray-600">N</div>
                <div>
                  <p class="font-medium text-gray-800">Nagy Anna</p>
                  <p class="text-xs text-gray-500">2024-08-15</p>
                </div>
              </div>
              <div class="flex items-center gap-1 mb-2">
                <span class="text-yellow-500 text-sm">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                <span class="text-sm font-semibold text-gray-700 ml-1">5</span>
              </div>
              <p class="text-gray-600">Fantasztikus hely! A gyerekek im√°dt√°k a strandot, mi pedig a nyugodt k√∂rnyezetet.</p>
            </div>
            <div class="pb-4 border-b border-gray-200">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-semibold text-gray-600">S</div>
                <div>
                  <p class="font-medium text-gray-800">Szab√≥ B√©la</p>
                  <p class="text-xs text-gray-500">2024-07-22</p>
                </div>
              </div>
              <div class="flex items-center gap-1 mb-2">
                <span class="text-yellow-500 text-sm">‚≠ê‚≠ê‚≠ê‚≠ê</span>
                <span class="text-sm font-semibold text-gray-700 ml-1">4</span>
              </div>
              <p class="text-gray-600">J√≥ kemping, tiszta mosd√≥k. Az √©tterem kiss√© dr√°ga volt.</p>
            </div>
            <div class="pb-4 border-b border-gray-200">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-semibold text-gray-600">T</div>
                <div>
                  <p class="font-medium text-gray-800">T√≥th √âva</p>
                  <p class="text-xs text-gray-500">2024-06-10</p>
                </div>
              </div>
              <div class="flex items-center gap-1 mb-2">
                <span class="text-yellow-500 text-sm">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                <span class="text-sm font-semibold text-gray-700 ml-1">5</span>
              </div>
              <p class="text-gray-600">Minden t√∂k√©letes volt! Vissza fogunk j√∂nni j√∂v≈ëre is.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Jobb oldali r√©sz - Foglal√°si panel -->
      <div class="md:w-1/3">
        <div class="booking-panel bg-white p-5 rounded-xl shadow-md">
          <div class="mb-4">
            <div class="flex items-baseline gap-2 mb-1">
              <span class="text-2xl font-bold text-gray-800">12 000 Ft</span>
              <span class="text-gray-500">/ √©jszaka</span>
            </div>
          </div>

          <!-- D√°tum kiv√°laszt√≥ k√°rty√°k -->
          <div class="grid grid-cols-2 gap-2 mb-4">
            <div class="border border-gray-300 rounded-lg p-3 cursor-pointer hover:border-gray-400 transition">
              <label class="text-xs font-semibold text-gray-600 uppercase block">√ârkez√©s</label>
              <div class="text-sm mt-1 text-gray-700">
                {{ bookingForm.checkIn ? formatDate(bookingForm.checkIn) : 'V√°lassz' }}
              </div>
            </div>
            <div class="border border-gray-300 rounded-lg p-3 cursor-pointer hover:border-gray-400 transition">
              <label class="text-xs font-semibold text-gray-600 uppercase block">T√°voz√°s</label>
              <div class="text-sm mt-1 text-gray-700">
                {{ bookingForm.checkOut ? formatDate(bookingForm.checkOut) : 'V√°lassz' }}
              </div>
            </div>
          </div>

          <!-- Napt√°r -->
          <div class="mb-4 border border-gray-200 rounded-lg p-4">
            <!-- H√≥nap navig√°ci√≥ -->
            <div class="flex items-center justify-between mb-4">
              <button @click="previousMonth" type="button" class="p-1 hover:bg-gray-100 rounded text-base">
                ‚Äπ
              </button>
              <span class="font-semibold text-gray-800">{{ currentMonthName }} {{ currentYear }}</span>
              <button @click="nextMonth" type="button" class="p-1 hover:bg-gray-100 rounded text-base">
                ‚Ä∫
              </button>
            </div>

            <!-- H√©t napjai -->
            <div class="grid grid-cols-7 gap-1 mb-2">
              <div v-for="day in ['V', 'H', 'K', 'Sz', 'Cs', 'P', 'Sz']" :key="day" 
                   class="text-center text-xs font-medium text-gray-500 py-1">
                {{ day }}
              </div>
            </div>

            <!-- Napt√°r napok -->
            <div class="grid grid-cols-7 gap-1">
              <div v-for="date in calendarDays" :key="date.key" 
                   @click="selectDate(date)"
                   :class="[
                     'text-center py-2 text-sm rounded-full cursor-pointer',
                     date.isCurrentMonth ? 'text-gray-700' : 'text-gray-300',
                     date.isDisabled ? 'cursor-not-allowed opacity-30' : '',
                     date.isSelected ? 'bg-[#4A7434] text-white' : '',
                     date.isInRange ? 'bg-[#E8F5E9]' : ''
                   ]"
              >
                {{ date.day }}
              </div>
            </div>
          </div>
            
          <!-- Vend√©gek -->
          <div class="border border-gray-300 rounded-lg p-3 mb-6">
            <label class="text-xs font-semibold text-gray-600 uppercase">Vend√©gek</label>
            <select v-model="bookingForm.guests" class="w-full text-sm mt-1 border-0 p-0 focus:ring-0 text-gray-700">
              <option value="1">1 vend√©g</option>
              <option value="2">2 vend√©g</option>
              <option value="3">3 vend√©g</option>
              <option value="4">4 vend√©g</option>
              <option value="5">5 vend√©g</option>
              <option value="6">6 vend√©g</option>
            </select>
          </div>

          <!-- Foglal√°s gomb -->
          <button 
            @click="handleBooking"
            class="w-full bg-[#8FA889] hover:bg-[#7a9175] text-white font-semibold py-4 rounded-lg transition-colors duration-200"
          >
            Foglal√°s
          </button>

          <p class="text-center text-xs text-gray-500 mt-3">M√©g nem ker√ºl felsz√°m√≠t√°sra</p>

          <!-- √ñsszes√≠t≈ë (ha van kiv√°lasztott d√°tum) -->
          <div v-if="bookingForm.checkIn && bookingForm.checkOut && nightCount > 0" class="mt-6 pt-6 border-t border-gray-200 space-y-2">
            <div class="flex justify-between text-sm text-gray-600">
              <span class="underline">12 000 Ft x {{ nightCount }} √©jszaka</span>
              <span>{{ totalPrice.toLocaleString() }} Ft</span>
            </div>
            <div class="flex justify-between text-sm font-semibold pt-2 border-t border-gray-200 text-gray-800">
              <span>√ñsszesen</span>
              <span>{{ totalPrice.toLocaleString() }} Ft</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</template>

<script setup>
import { ref, onMounted, nextTick, computed } from 'vue'
import L from 'leaflet'
import 'leaflet/dist/leaflet.css'

// Gal√©ria k√©pei (itt lehet a saj√°t k√©peket betenni)
const images = [
  '/img/Budapest_szallas1.jpg',
  '/img/Budapest_szallas2.jpg',
  '/img/Budapest_szallas3.jpg'
]
const currentImage = ref(0)

const nextImage = () => {
  currentImage.value = (currentImage.value + 1) % images.length
}

const prevImage = () => {
  currentImage.value = (currentImage.value - 1 + images.length) % images.length
}

// Feature / szolg√°ltat√°sok
const features = [
  { name: '√âtterem', icon: 'üçΩÔ∏è' },
  { name: 'Parkol√≥', icon: 'üÖøÔ∏è' },
  { name: 'Wifi', icon: 'üì∂' },
  { name: 'Medence', icon: 'üèä‚Äç‚ôÇÔ∏è' },
]

// Foglal√°si form adatok
const bookingForm = ref({
  checkIn: '',
  checkOut: '',
  guests: '2'
})

// Napt√°r √°llapot
const currentMonth = ref(new Date().getMonth())
const currentYear = ref(new Date().getFullYear())

// H√≥nap neve
const currentMonthName = computed(() => {
  const months = ['Janu√°r', 'Febru√°r', 'M√°rcius', '√Åprilis', 'M√°jus', 'J√∫nius', 
                  'J√∫lius', 'Augusztus', 'Szeptember', 'Okt√≥ber', 'November', 'December']
  return months[currentMonth.value]
})

// Napt√°r navig√°ci√≥
const previousMonth = () => {
  if (currentMonth.value === 0) {
    currentMonth.value = 11
    currentYear.value--
  } else {
    currentMonth.value--
  }
}

const nextMonth = () => {
  if (currentMonth.value === 11) {
    currentMonth.value = 0
    currentYear.value++
  } else {
    currentMonth.value++
  }
}

// Napt√°r napok gener√°l√°sa
const calendarDays = computed(() => {
  const days = []
  const firstDay = new Date(currentYear.value, currentMonth.value, 1)
  const lastDay = new Date(currentYear.value, currentMonth.value + 1, 0)
  
  // H√©tf≈ë-vas√°rnap rendszer: 0=vas√°rnap -> 6=szombat √°talak√≠t√°sa 0=h√©tf≈ë -> 6=vas√°rnap
  let startDay = firstDay.getDay() - 1
  if (startDay < 0) startDay = 6
  
  // El≈ëz≈ë h√≥nap napjai
  const prevMonthLastDay = new Date(currentYear.value, currentMonth.value, 0).getDate()
  for (let i = startDay - 1; i >= 0; i--) {
    const day = prevMonthLastDay - i
    const date = new Date(currentYear.value, currentMonth.value - 1, day)
    days.push({
      day,
      date: date.toISOString().split('T')[0],
      isCurrentMonth: false,
      isDisabled: true,
      isSelected: false,
      isInRange: false,
      key: `prev-${day}`
    })
  }
  
  // Aktu√°lis h√≥nap napjai
  const today = new Date()
  today.setHours(0, 0, 0, 0)
  
  for (let day = 1; day <= lastDay.getDate(); day++) {
    const date = new Date(currentYear.value, currentMonth.value, day)
    const dateStr = date.toISOString().split('T')[0]
    const isPast = date < today
    
    const isCheckIn = dateStr === bookingForm.value.checkIn
    const isCheckOut = dateStr === bookingForm.value.checkOut
    const isInRange = bookingForm.value.checkIn && bookingForm.value.checkOut && 
                      dateStr > bookingForm.value.checkIn && dateStr < bookingForm.value.checkOut
    
    days.push({
      day,
      date: dateStr,
      isCurrentMonth: true,
      isDisabled: isPast,
      isSelected: isCheckIn || isCheckOut,
      isInRange: isInRange,
      key: `current-${day}`
    })
  }
  
  // K√∂vetkez≈ë h√≥nap napjai (hogy 42 nap legyen, 6 sor)
  const remainingDays = 42 - days.length
  for (let day = 1; day <= remainingDays; day++) {
    const date = new Date(currentYear.value, currentMonth.value + 1, day)
    days.push({
      day,
      date: date.toISOString().split('T')[0],
      isCurrentMonth: false,
      isDisabled: true,
      isSelected: false,
      isInRange: false,
      key: `next-${day}`
    })
  }
  
  return days
})

// D√°tum kiv√°laszt√°sa
const selectDate = (dateObj) => {
  if (dateObj.isDisabled) return
  
  // Ha nincs check-in vagy m√°r van mindkett≈ë, √∫j check-in
  if (!bookingForm.value.checkIn || (bookingForm.value.checkIn && bookingForm.value.checkOut)) {
    bookingForm.value.checkIn = dateObj.date
    bookingForm.value.checkOut = ''
  }
  // Ha van check-in de nincs check-out
  else if (bookingForm.value.checkIn && !bookingForm.value.checkOut) {
    // Ha a kiv√°lasztott d√°tum kor√°bbi mint a check-in, az legyen az √∫j check-in
    if (dateObj.date < bookingForm.value.checkIn) {
      bookingForm.value.checkIn = dateObj.date
    } else {
      bookingForm.value.checkOut = dateObj.date
    }
  }
}

// D√°tum form√°z√°sa
const formatDate = (dateStr) => {
  const date = new Date(dateStr)
  const month = date.getMonth() + 1
  const day = date.getDate()
  return `${month}. ${day}.`
}

// Mai d√°tum minimum (nem lehet m√∫ltbeli d√°tumot v√°lasztani)
const minDate = computed(() => {
  const today = new Date()
  return today.toISOString().split('T')[0]
})

// √âjszak√°k sz√°ma
const nightCount = computed(() => {
  if (!bookingForm.value.checkIn || !bookingForm.value.checkOut) return 0
  const checkIn = new Date(bookingForm.value.checkIn)
  const checkOut = new Date(bookingForm.value.checkOut)
  const diff = checkOut - checkIn
  const nights = Math.ceil(diff / (1000 * 60 * 60 * 24))
  return nights > 0 ? nights : 0
})

// Teljes √°r
const totalPrice = computed(() => {
  return nightCount.value * 12000
})

// Foglal√°s kezel√©se
const handleBooking = () => {
  if (!bookingForm.value.checkIn || !bookingForm.value.checkOut) {
    alert('K√©rlek v√°lassz √©rkez√©si √©s t√°voz√°si d√°tumot!')
    return
  }
  if (nightCount.value <= 0) {
    alert('A t√°voz√°s d√°tum√°nak az √©rkez√©s ut√°n kell lennie!')
    return
  }
  alert(`Foglal√°s:\n${nightCount.value} √©jszaka\n${bookingForm.value.guests} vend√©g\n√ñsszesen: ${totalPrice.value} Ft`)
}

// --- Leaflet t√©rk√©p ---
const selectedSpot = ref(null)

// Teszt spot adatok (k√©s≈ëbb API-b√≥l j√∂n)
const spots = [
  { id: 1, name: 'A1 - S√°tornak', type: 's√°tor', capacity: 4, price: 3500, booked: false, coords: [46.52247780, 19.74844711] },
  { id: 2, name: 'A2 - S√°tornak', type: 's√°tor', capacity: 4, price: 3500, booked: true,  coords: [46.52232919, 19.74841008] },
  { id: 3, name: 'B1 - Lak√≥kocsi', type: 'lak√≥kocsi', capacity: 6, price: 5500, booked: false, coords: [46.52246081, 19.74858287] },
  { id: 4, name: 'B2 - Lak√≥kocsi', type: 'lak√≥kocsi', capacity: 6, price: 5500, booked: false, coords: [46.52229946, 19.74858904] },
  { id: 5, name: 'C1 - S√°tornak', type: 's√°tor', capacity: 3, price: 3000, booked: false, coords: [46.52240986, 19.74873097] },
  { id: 6, name: 'C2 - S√°tornak', type: 's√°tor', capacity: 3, price: 3000, booked: true,  coords: [46.52226125, 19.74877417] },
  { id: 7, name: 'D1 - Fah√°z',    type: 'fah√°z',  capacity: 5, price: 12000, booked: false, coords: [46.52238014, 19.74897164] },
  { id: 8, name: 'D2 - Fah√°z',    type: 'fah√°z',  capacity: 5, price: 12000, booked: false, coords: [46.52221879, 19.74895930] },
  { id: 9, name: 'E1 - H√°z',      type: 'h√°z',    capacity: 8, price: 18000, booked: false, coords: [46.52234617, 19.74908889] },
]

// Kemping ter√ºlet hat√°ra (a te poligonoddal)
const campingBoundary = [
  [46.52279056, 19.74542221],
  [46.52266678, 19.74555315],
  [46.52253742, 19.74560845],
  [46.52233197, 19.74571904],
  [46.52157102, 19.74607293],
  [46.52010997, 19.74670329],
  [46.52171952, 19.75202612],
  [46.52345597, 19.75069474],
  [46.52279056, 19.74542221],
]

// Kempingez≈ëhely ter√ºlet (kisebb poligon)
const campingZone = [
  [46.52314947, 19.74967592],
  [46.52297933, 19.74978190],
  [46.52305127, 19.75005179],
  [46.52321170, 19.74990201],
  [46.52319128, 19.74982712],
  [46.52314947, 19.74967592],
]

onMounted(async () => {
  await nextTick()

  // T√©rk√©p l√©trehoz√°sa
  const map = L.map('campingMap', {
    zoomControl: true,
  }).setView([46.5223, 19.7490], 17)

  // OpenStreetMap alapt√©rk√©p
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap',
    maxZoom: 20,
  }).addTo(map)

  // Kemping ter√ºlet hat√°ra (z√∂ld vonal)
  L.polygon(campingBoundary, {
    color: '#16a34a',
    weight: 2,
    fillColor: '#bbf7d0',
    fillOpacity: 0.2,
  }).addTo(map).bindPopup('Kemping ter√ºlet')

  // Kempingez≈ëhely z√≥na (k√©k)
  L.polygon(campingZone, {
    color: '#2563eb',
    weight: 2,
    fillColor: '#bfdbfe',
    fillOpacity: 0.3,
    dashArray: '5, 5',
  }).addTo(map).bindPopup('Kempingez≈ëhely z√≥na')

  // Spot markerek
  spots.forEach(spot => {
    const color = spot.booked ? '#ef4444' : '#22c55e'

    const marker = L.circleMarker(spot.coords, {
      radius: 10,
      fillColor: color,
      color: '#fff',
      weight: 2,
      fillOpacity: 0.9,
    }).addTo(map)

    // Tooltip (hoverre megjelenik)
    marker.bindTooltip(spot.name, { direction: 'top', offset: [0, -10] })

    // Kattint√°sra kiv√°laszt√°s
    marker.on('click', () => {
      if (spot.booked) {
        selectedSpot.value = null
        return
      }
      selectedSpot.value = spot
    })
  })
})</script>

<style scoped>
/* Gal√©ria gombok */
button {
  font-size: 2rem;
  background-color: rgba(255,255,255,0.7);
  transition: background-color 0.3s;
}
button:hover {
  background-color: rgba(255,255,255,1);
}

/* Container reszponz√≠v elrendez√©s */
.container > div {
  gap: 1rem;
}

/* K√©pek √©s √°rny√©kok */
img {
  border-radius: 0.5rem;
  object-fit: cover;
}

/* Foglal√°si panel sticky poz√≠ci√≥ */
.booking-panel {
  position: sticky;
  top: 90px; /* Header magass√°ga (80px) + kis marg√≥ (10px) */
  z-index: 10; /* Alacsonyabb mint a header z-50 */
  max-height: calc(100vh - 100px); /* Ne legyen magasabb mint a viewport */
  overflow-y: auto; /* Ha t√∫l hossz√∫, scrollozhat√≥ legyen */
}
</style>
